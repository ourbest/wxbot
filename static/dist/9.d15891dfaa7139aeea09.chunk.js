webpackJsonp([9],{105:function(t,n){t.exports={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("div",{staticClass:"settings"},[e("Alert",{attrs:{type:"info"}},[t._v("\n            设置\n            "),e("span",{attrs:{slot:"desc"},slot:"desc"},[e("ul",[e("li",[t._v("自动接收好友"),e("span",{staticClass:"switch"},[e("i-switch",{on:{"on-change":t.changeAccept},model:{value:t.autoAccept,callback:function(n){t.autoAccept=n},expression:"autoAccept"}})],1)]),t._v(" "),e("li",[t._v("抓取公众号文章"),e("span",{staticClass:"switch"},[e("i-switch",{on:{"on-change":t.changeCrawlerArticles},model:{value:t.crawlerArticles,callback:function(n){t.crawlerArticles=n},expression:"crawlerArticles"}})],1)]),t._v(" "),e("li",[t._v("自动发送抓取的文章"),e("span",{staticClass:"switch"},[e("i-switch",{on:{"on-change":t.changeAutoSend},model:{value:t.autoSend,callback:function(n){t.autoSend=n},expression:"autoSend"}})],1)]),t._v(" "),e("li",[t._v("发送钉钉通知"),e("span",{staticClass:"switch"},[e("i-switch",{on:{"on-change":t.changeNotifyDingding},model:{value:t.notifyDingding,callback:function(n){t.notifyDingding=n},expression:"notifyDingding"}})],1)]),t._v(" "),e("li",[t._v("钉钉账号"),e("span",{staticClass:"switch"},[e("Row",{attrs:{type:"flex"}},[e("i-col",[e("i-input",{model:{value:t.masterPhone,callback:function(n){t.masterPhone=n},expression:"masterPhone"}})],1),e("i-col",[e("Button",{on:{click:t.saveMasterPhone}},[t._v("保存")])],1)],1)],1)]),t._v(" "),e("li",[t._v("AppID"),e("span",{staticClass:"switch"},[e("Row",{attrs:{type:"flex"}},[e("i-col",[e("i-input",{model:{value:t.appId,callback:function(n){t.appId=n},expression:"appId"}})],1),e("i-col",[e("Button",{on:{click:t.saveAppId}},[t._v("保存")])],1)],1)],1)])])])])],1),t._v(" "),e("pre",[t._v(t._s(t.info))]),t._v(" "),e("Button",{attrs:{type:"primary"},on:{click:t.logoutBot}},[t._v("注销")])],1)},staticRenderFns:[]}},69:function(t,n,e){e(91);var a=e(11)(e(82),e(105),"data-v-0a1fae6b",null);t.exports=a.exports},82:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={data:function(){return{autoAccept:!1,crawlerArticles:!1,autoSend:!1,notifyDingding:!1,info:"",masterPhone:"",appId:null}},computed:{bot:function(){return this.$route.params.bot},auth:function(){return this.$store.state.auth}},methods:{changeAccept:function(){this.changeCfg("auto_accept",!!this.autoAccept)},changeNotifyDingding:function(){this.changeCfg("notify_dingding",!!this.notifyDingding)},changeCrawlerArticles:function(){this.changeCfg("crawler_articles",!!this.crawlerArticles)},changeAutoSend:function(){this.changeCfg("auto_send",!!this.autoSend)},saveMasterPhone:function(){this.changeCfg("master_phone",this.masterPhone)},changeCfg:function(t,n){var e=this;this.$http.post("/bot/config",{name:this.bot,key:t,value:n}).then(function(t){e.$Message.info(t.data.message)})},saveAppId:function(){this.changeCfg("app_id",this.appId)},logoutBot:function(){var t=this;this.$http.get("/bot/logout",{params:{name:this.bot}}).then(function(){t.$router.push("/")})},setAsMaster:function(){var t=this;this.$http.get("/bot/master/assign",{params:{name:this.bot}}).then(function(n){0===n.data.code?(t.$store.commit("reload"),t.$store.commit("login",""),t.$router.push("/")):t.$Message.info(n.data.message)})},loadBot:function(){var t=this;""===this.bot?this.$router.push("/"):this.$http.get("/bot/info",{params:{name:this.bot}}).then(function(n){t.info=n.data.friends,t.autoAccept=n.data.config.auto_accept,t.appId=n.data.config.app_id,t.crawlerArticles=n.data.config.crawler_articles,t.notifyDingding=n.data.config.notify_dingding,t.masterPhone=n.data.config.master_phone})}},watch:{bot:function(){this.loadBot()},auth:function(){this.loadBots()}},mounted:function(){this.loadBot()}}},91:function(t,n){}});